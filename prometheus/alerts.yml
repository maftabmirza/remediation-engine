groups:
  - name: test_alerts
    rules:
    - alert: TestAlertFromPrometheus
      expr: vector(1) > 0
      for: 10s
      labels:
        severity: warning
      annotations:
        summary: "Test Alert from Prometheus Rules"
        description: "This alert is generated by a Prometheus Rule file (alerts.yml) and should be visible in Prometheus UI."

    - alert: DatabaseConnectionSpike
      expr: vector(1) > 0
      for: 30s
      labels:
        severity: critical
        service: database
      annotations:
        summary: "High DB Connection Count"
        description: "Simulated alert for high database connections."

    - alert: HighLatencyAPI
      expr: vector(1) > 0
      for: 1m
      labels:
        severity: error
        service: api
      annotations:
        summary: "API Latency High"
        description: "Simulated alert for API latency > 500ms."

    - alert: CacheMissRatioHigh
      expr: vector(1) > 0
      for: 45s
      labels:
        severity: warning
        service: cache
      annotations:
        summary: "Cache Miss Ratio High"
        description: "Simulated alert for cache efficiency drop."

    - alert: DiskSpaceLow
      expr: vector(1) > 0
      for: 2m
      labels:
        severity: critical
        instance: prod-server-01
      annotations:
        summary: "Disk Space Low"
        description: "Simulated alert for disk usage > 90%."

    - alert: ApacheDown
      expr: apache_up == 0
      for: 30s
      labels:
        severity: critical
        service: apache
        instance: "{{ $labels.instance }}"
      annotations:
        summary: "Apache Service Down"
        description: "Apache web server is down on {{ $labels.instance }}."
